@using ATI_Projet_Models
@using ATI_Projet_Models.Models.Societes.Clients
@using ATI_Projet_Tools.Tools
@using ATI_Projets_Models
@using Blazorise.Components
@using System.Globalization;
@inject VariablesGlobales variables;

<div class="m-3">
   <SelectList TItem="ClientList"
               TValue="int"
               Data="@Liste"
               TextField="@(item => (item.Id + ": " +item.Name))"
               ValueField="@(item => item.Id)"
               DefaulPersonnelText="Recherche"
               SelectedValue="Id"
               SelectedValueChanged="@(e=>{
                                            SelectChange(e);
                                        })" />
   @* <Button Color="ButtonColor.Success" @onclick="OpenModalCreate">@localizer["Ajouter"]</Button> *@
   <div>
      @if (Id >= 1)
      {
         @if (EmployeProfil != null && EmployeProfil.Id > 0 && fonctions != null && departements != null)
         {

               <div class="d-flex">
                  <div class="d-flex flex-column">
                     <Profil EmployeProfil="EmployeProfil" ProfilChanged="ProfilChanged"></Profil>
                     <div class="border-end">
                        <div class="m-1 d-flex">
                           <Button Color="ButtonColor.Secondary" Outline="true" Active="@(choix == 0)" Size="Size.Small" @onclick=@(() => choisir(0))>@localizer["Infos Privé"]</Button>
                           <Button Color="ButtonColor.Secondary" Outline="true" Active="@(choix == 1)" Size="Size.Small" @onclick=@(() => choisir(1))>@localizer["Infos Professionnelles"]</Button>
                        </div>

                        @{
                           switch (choix)
                           {
                              case 0:
                                 {
                                    if (EmployePrivate != null)
                                    {
                                       <InfoPriv EmployePrivate="@EmployePrivate"></InfoPriv>
                                    }
                                    break;
                                 }
                              case 1:
                                 {
                                    if (EmployeProf != null)
                                    {
                                       <InfoProf EmployeProf="@EmployeProf"></InfoProf>
                                    }
                                    break;
                                 }
                           }
                        }
                     </div>
                  </div>
                  <div class="d-flex flex-column contacts">
                     <EmailList emails="emails" emailsChanged="TriggerEmail" PersonneId="EmployeProfil.PersonneId"></EmailList>
                     <TelephoneList telephones="telephones" telephonesChanged="TriggerTelephone" PersonneId="EmployeProfil.PersonneId" />
                  </div>

               </div>
            </div>

            <Offcanvas @ref="offcanvas"
                       Title="Contacts"
                       Size="OffcanvasSize.Large">
               <BodyTemplate>
                  <div class="container d-flex flex-column" style="max-width: 40rem">
                     <EmailList emails="emails" emailsChanged="TriggerEmail" PersonneId="EmployeProfil.PersonneId"></EmailList>
                     <TelephoneList telephones="telephones" telephonesChanged="TriggerTelephone" PersonneId="EmployeProfil.PersonneId" />
                  </div>
                  <div class="mt-3">
                     <Button Color="ButtonColor.Primary" @onclick="OnHideOffcanvasClick">@localizer["Fermer"]</Button>
                  </div>
               </BodyTemplate>
            </Offcanvas>
         }

      }
   </div>

</div>



<Modal @ref="modal" Size="ModalSize.Large"></Modal>